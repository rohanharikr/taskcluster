######## IMPORTANT
#
# This file DOES NOT DEFINE A PUBLIC API for Taskcluster
#
# The columns in the Taskcluster database are considered an implementation detail
# and may change without notice even in minor versions.  Do not depend on them.
# Even within the Taskcluster codebase, all access must go though stored functions.
# The information below is only useful to developers implementing or modifying
# stored functions.

# All of the *_entities tables below are used by tc-lib-entities to emulate
# Azure entities.
clients_entities:
  partition_key: text not null
  row_key: text not null
  value: jsonb not null
  version: integer not null
  etag: uuid
roles:
  role_id: text not null
  scopes: jsonb not null
  created: timestamp with time zone not null
  description: text not null
  last_modified: timestamp with time zone not null
  etag: uuid not null
taskcluster_check_runs_entities:
  partition_key: text not null
  row_key: text not null
  value: jsonb not null
  version: integer not null
  etag: uuid
taskcluster_checks_to_tasks_entities:
  partition_key: text not null
  row_key: text not null
  value: jsonb not null
  version: integer not null
  etag: uuid
github_builds:
  organization: text not null
  repository: text not null
  sha: text not null
  task_group_id: text not null
  state: text not null
  created: timestamp with time zone not null
  updated: timestamp with time zone not null
  installation_id: integer not null 
  event_type: text not null 
  event_id: text not null 
  etag: uuid not null
taskcluster_integration_owners_entities:
  partition_key: text not null
  row_key: text not null
  value: jsonb not null
  version: integer not null
  etag: uuid
hooks_entities:
  partition_key: text not null
  row_key: text not null
  value: jsonb not null
  version: integer not null
  etag: uuid
hooks_last_fires:
  hook_group_id: text not null
  hook_id: text not null
  fired_by: text not null
  task_id: text not null
  task_create_time: timestamp with time zone not null
  result: text not null
  error: text not null
  etag: uuid not null
hooks_queues:
  hook_group_id: text not null
  hook_id: text not null
  queue_name: text not null
  bindings: jsonb not null
  etag: uuid not null
indexed_tasks:
  namespace: text not null
  name: text not null
  rank: integer not null
  task_id: text not null
  data: jsonb not null
  expires: timestamp with time zone not null
  etag: uuid not null
index_namespaces:
  parent: text not null
  name: text not null
  expires: timestamp with time zone not null
  etag: uuid not null
denylisted_notifications:
  notification_type: text not null
  notification_address: text not null
  etag: uuid
cache_purges:
  provisioner_id: text not null
  worker_type: text not null
  cache_name: text not null
  before: timestamp with time zone not null
  expires: timestamp with time zone not null
  etag: uuid not null
secrets_entities:
  partition_key: text not null
  row_key: text not null
  value: jsonb not null
  version: integer not null
  etag: uuid
access_token_table_entities:
  partition_key: text not null
  row_key: text not null
  value: jsonb not null
  version: integer not null
  etag: uuid
authorization_codes_table_entities:
  partition_key: text not null
  row_key: text not null
  value: jsonb not null
  version: integer not null
  etag: uuid
github_access_tokens:
  user_id: text not null
  encrypted_access_token: jsonb not null
session_storage_table_entities:
  partition_key: text not null
  row_key: text not null
  value: jsonb not null
  version: integer not null
  etag: uuid
wmworker_pool_errors_entities:
  partition_key: text not null
  row_key: text not null
  value: jsonb not null
  version: integer not null
  etag: uuid
worker_pools:
  worker_pool_id: text not null
  provider_id: text not null
  created: timestamp with time zone not null
  description: text not null
  email_on_error: boolean not null
  owner: text not null
  last_modified: timestamp with time zone not null
  config: jsonb not null
  provider_data: jsonb not null
  previous_provider_ids: jsonb not null
  etag: uuid not null
workers:
  worker_pool_id: text not null
  worker_group: text not null
  worker_id: text not null
  provider_id: text not null
  created: timestamp with time zone not null
  expires: timestamp with time zone not null
  state: text not null
  provider_data: jsonb not null
  capacity: integer not null
  last_modified: timestamp with time zone not null
  last_checked: timestamp with time zone not null
  secret: jsonb
  etag: uuid not null
tasks:
  task_id: text not null
  created: timestamp with time zone not null
  deadline: timestamp with time zone not null
  dependencies: jsonb not null
  etag: uuid not null
  expires: timestamp with time zone not null
  extra: jsonb not null
  metadata: jsonb not null
  payload: jsonb not null
  priority: task_priority not null
  provisioner_id: text not null
  requires: task_requires not null
  ever_resolved: boolean not null
  retries: integer not null
  retries_left: integer not null
  routes: jsonb not null
  runs: jsonb not null
  scheduler_id: text not null
  scopes: jsonb not null
  tags: jsonb not null
  taken_until: timestamp with time zone
  task_group_id: text not null
  worker_type: text not null
queue_artifacts:
  task_id: text not null
  run_id: integer not null
  name: text not null
  storage_type: text not null
  content_type: text not null
  details: jsonb not null
  expires: timestamp with time zone not null
  present: boolean not null
  etag: uuid not null
task_groups:
  expires: timestamp with time zone not null
  scheduler_id: text not null
  task_group_id: text not null
  etag: uuid not null
task_dependencies:
  dependent_task_id: text not null
  required_task_id: text not null
  expires: timestamp with time zone not null
  requires: task_requires not null
  satisfied: boolean not null
  etag: uuid not null
queue_worker_entities:
  partition_key: text not null
  row_key: text not null
  value: jsonb not null
  version: integer not null
  etag: uuid
queue_worker_type_entities:
  partition_key: text not null
  row_key: text not null
  value: jsonb not null
  version: integer not null
  etag: uuid
queue_provisioner_entities:
  partition_key: text not null
  row_key: text not null
  value: jsonb not null
  version: integer not null
  etag: uuid

# This table is used by tc-lib-azqueue to emulate the Azure Storage API's Queue functionality.
azure_queue_messages:
  message_id: uuid not null
  queue_name: text not null
  message_text: text not null
  inserted: timestamp with time zone not null
  visible: timestamp with time zone not null
  expires: timestamp with time zone not null
  pop_receipt: uuid
